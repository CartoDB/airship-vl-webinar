const e=window.airship.h;class t{constructor(){this.minValue=0,this.maxValue=10,this.step=1,this.disabled=!1,this.draggable=!1,this.thumbs=[]}validateValue(e){if(!this._isBetweenValidValues(e))throw new Error(`RangeSlider: Value ${e} has to be between `+`minValue (${this.minValue}) and maxValue (${this.maxValue})`);this._updateThumbs()}validateRange(e){if(2!==e.length)throw new Error(`RangeSlider: Range ${e} need two values at most`);e.map(e=>this.validateValue(e)),this._updateThumbs()}componentWillLoad(){this._validateValues(),this._updateThumbs()}render(){if(!(this.thumbs.length<1))return e("div",{class:{"as-range-slider":!0,"as-range-slider--disabled":this.disabled}},e("div",{class:"as-range-slider__rail"},this.thumbs.map(e=>this._renderThumb(e)),this._renderRangeBar()))}_updateThumbs(){this.thumbs=this._createThumbs()}_renderThumb(t){return e("as-range-slider-thumb",{value:t.value,valueMin:t.valueMin,valueMax:t.valueMax,percentage:t.percentage,disabled:this.disabled,formatValue:this.formatValue,onThumbMove:e=>this._onThumbMove(t,e.detail),onThumbIncrease:()=>this._onKeyboardThumbMove(t,1),onThumbDecrease:()=>this._onKeyboardThumbMove(t,-1),onThumbChangeStart:()=>this._emitChangeIn(this.changeStart),onThumbChangeEnd:()=>this._emitChangeIn(this.changeEnd)})}_renderRangeBar(){const[t,a]=this._getCurrentThumbPercentages();return e("as-range-slider-bar",{rangeStartPercentage:t,rangeEndPercentage:a,draggable:this.draggable&&void 0!==this.range,disabled:this.disabled,stepPercentage:this._getStepPercentage(),onBarChangeStart:()=>this._emitChangeIn(this.changeStart),onBarChangeEnd:()=>this._emitChangeIn(this.changeEnd),onBarMove:e=>this._onBarMove(e)})}_getCurrentThumbPercentages(){return[this._sliderHasRange()?this.thumbs[0].percentage:0,this.thumbs[this.thumbs.length-1].percentage]}_validateValues(){this.value?this.validateValue(this.value):this.range&&this.validateRange(this.range)}_createThumbs(){if(!this.range||!this.range.length)return[this._getThumbData(this.value)];const e=this.range.map(e=>this._getThumbData(e));return this._clampThumbValues(e),e}_getThumbData(e){return{percentage:this._isBetweenValidValues(e)?this._getPercentage(e):this._getPercentage(this.minValue),value:this._isBetweenValidValues(e)?e:this.minValue,valueMax:this.maxValue,valueMin:this.minValue}}_isBetweenValidValues(e){return e>=this.minValue&&e<=this.maxValue}_sliderHasRange(){return this.range&&2===this.range.length}_onKeyboardThumbMove(e,t){const a=this._getPercentage(e.value+t*this.step);a<0||a>100||this._onThumbMove(e,a)}_onThumbMove(e,t){const[a,s]=this.thumbs,n=a===e,r=s===e,i=this._getValueFromPercentage(t),l=this._getStepValue(i),h=this._getPercentage(l);let u=this.minValue,o=this.maxValue;this._sliderHasRange()&&n&&(o=s.value-this.step)<l||this._sliderHasRange()&&r&&(u=a.value+this.step)>l||(e.value=l,e.valueMin=u,e.valueMax=o,e.percentage=h,this.thumbs=[...this.thumbs],this._emitChangeIn(this.change))}_onBarMove(e){const t=e.detail.map(e=>this._getValueFromPercentage(e)).map(e=>this._getStepValue(e)).map(e=>({percentage:this._getPercentage(e),value:e}));this._clampThumbValues(t),this.thumbs=[...t],this._emitChangeIn(this.change)}_emitChangeIn(e){const t=this.thumbs.map(e=>e.value);return e.emit(t)}_getPercentage(e){return(e-this.minValue)/(this.maxValue-this.minValue)*100}_getValueFromPercentage(e){return e*(this.maxValue-this.minValue)/100+this.minValue}_getStepPercentage(){return 100*this.step/(this.maxValue-this.minValue)}_clampThumbValues(e){const[t,a]=e;t.valueMin=this.minValue,t.valueMax=Math.min(a.value-this.step,this.maxValue),a.valueMin=Math.max(this.minValue,t.value+this.step),a.valueMax=this.maxValue}_getStepValue(e){const t=Math.max(this.minValue,Math.round(e/this.step)*this.step);return this.roundToStep(t,this.step)}roundToStep(e,t){return Number.parseFloat(e.toFixed(function(e){let t=0;for(;a=e*10**t,Math.abs(Math.round(a)-a)>1e-10&&isFinite(10**t);)t++;var a;return t}(t)))}static get is(){return"as-range-slider"}static get properties(){return{disabled:{type:Boolean,attr:"disabled"},draggable:{type:Boolean,attr:"draggable"},formatValue:{type:"Any",attr:"format-value"},maxValue:{type:Number,attr:"max-value"},minValue:{type:Number,attr:"min-value"},range:{type:"Any",attr:"range",watchCallbacks:["validateRange"]},step:{type:Number,attr:"step"},thumbs:{state:!0},value:{type:Number,attr:"value",watchCallbacks:["validateValue"]}}}static get events(){return[{name:"change",method:"change",bubbles:!0,cancelable:!0,composed:!0},{name:"changeStart",method:"changeStart",bubbles:!0,cancelable:!0,composed:!0},{name:"changeEnd",method:"changeEnd",bubbles:!0,cancelable:!0,composed:!0}]}static get style(){return"as-range-slider{--as--range-slider--rail-color:var(--as--color--ui-03,#e2e6e3);--as--range-slider--range-color:var(--as--color--primary,#1785fb);display:block;height:32px}as-range-slider .as-range-slider--disabled{pointer-events:none}as-range-slider .as-range-slider__rail{display:-ms-flexbox;display:flex;position:relative;width:calc(100% - 12px);height:12px;margin:auto}as-range-slider .as-range-slider__rail:before{content:\" \";position:absolute;z-index:0;top:50%;left:0;width:100%;height:2px;-webkit-transform:translate3d(0,-50%,0);transform:translate3d(0,-50%,0);background-color:var(--as--range-slider--rail-color,#e2e6e3);pointer-events:none}"}}function a(e){const t=t=>{e.move(t),t.preventDefault(),t.stopPropagation()},a=n=>{!function(e,t,a){document.removeEventListener("mousemove",t.move),document.removeEventListener("touchmove",t.move),document.removeEventListener("mouseup",t.release),document.removeEventListener("touchend",t.release),document.removeEventListener("dragstart",s),a.move&&a.move(e),a.release&&a.release(e)}(n,{move:t,release:a},e),n.preventDefault(),n.stopPropagation()};document.addEventListener("mousemove",t),document.addEventListener("touchmove",t),document.addEventListener("mouseup",a),document.addEventListener("touchend",a),document.addEventListener("dragstart",s)}function s(e){e.preventDefault(),e.stopPropagation()}const n=100,r=0;class i{render(){return e("div",{class:{"as-range-slider__range-bar":!0,"as-range-slider__range-bar--disabled":this.disabled,"as-range-slider__range-bar--draggable":this.draggable},style:{left:`${this.rangeStartPercentage}%`,width:`${this.rangeEndPercentage-this.rangeStartPercentage}%`}})}onMouseDown(e){this.draggable&&(this.barChangeStart.emit(),this.railElement=document.querySelector(".as-range-slider__rail"),this.rangeBarElement=this.element.querySelector(".as-range-slider__range-bar"),this.previousMouseEvent=e,a({move:e=>this.onMove(e),release:()=>this._onRelease()}))}onMove(e){if(!this.previousMouseEvent)return void(this.previousMouseEvent=e);this.setCursorTo("grabbing"),this.rangeBarElement&&this.rangeBarElement.classList&&this.rangeBarElement.classList.add("as-range-slider__range-bar--moving");const t=this._getRangeDifference(),a=this._getMovementDelta(e,this.previousMouseEvent);let s=100*(this.rangeBarElement.offsetLeft+a)/this.railElement.offsetWidth,i=s+t;s<r&&(i=(s=r)+t),i>n&&(s=(i=n)-t),this._updateRangePercentages([s,i])&&(this.previousMouseEvent=e),this.barMove.emit([this.rangeStartPercentage,this.rangeEndPercentage])}_updateRangePercentages(e){const[t,a]=e,s=t<this.rangeStartPercentage?-1:1,i=Math.abs(this.rangeStartPercentage-t),l=this.stepPercentage,h=this._getRangeDifference();return i>=l?(this.rangeStartPercentage+=s*i,this.rangeEndPercentage+=s*i,!0):a>n-l?(this.rangeStartPercentage=n-h,this.rangeEndPercentage=n,!1):t<r+l?(this.rangeStartPercentage=r,this.rangeEndPercentage=r+h,!1):void 0}_onRelease(){this.setCursorTo(""),this.rangeBarElement&&this.rangeBarElement.classList&&this.rangeBarElement.classList.remove("as-range-slider__range-bar--moving"),this.barChangeEnd.emit()}_getMovementDelta(e,t){const a=e.changedTouches,s=t.changedTouches;return(a?a[0].pageX:e.pageX)-(s?s[0].pageX:t.pageX)}_getRangeDifference(){return this.rangeEndPercentage-this.rangeStartPercentage}setCursorTo(e){document.body.style.cursor=e}static get is(){return"as-range-slider-bar"}static get properties(){return{disabled:{type:Boolean,attr:"disabled"},draggable:{type:Boolean,attr:"draggable"},element:{elementRef:!0},rangeEndPercentage:{type:Number,attr:"range-end-percentage",mutable:!0},rangeStartPercentage:{type:Number,attr:"range-start-percentage",mutable:!0},stepPercentage:{type:Number,attr:"step-percentage"}}}static get events(){return[{name:"barMove",method:"barMove",bubbles:!0,cancelable:!0,composed:!0},{name:"barChangeStart",method:"barChangeStart",bubbles:!0,cancelable:!0,composed:!0},{name:"barChangeEnd",method:"barChangeEnd",bubbles:!0,cancelable:!0,composed:!0}]}static get listeners(){return[{name:"mousedown",method:"onMouseDown",passive:!0},{name:"touchstart",method:"onMouseDown",passive:!0}]}static get style(){return"as-range-slider-bar{--as--range-slider__range-bar--background-color:var(--as--color--primary,#1785fb);--as--range-slider__range-bar--background-color--disabled:var(--as--color--ui-03,#e2e6e3)}as-range-slider-bar .as-range-slider__range-bar{position:absolute;z-index:1;top:50%;height:2px;-webkit-transform:translate3d(0,-50%,0);transform:translate3d(0,-50%,0);background-color:var(--as--range-slider__range-bar--background-color,#1785fb)}as-range-slider-bar .as-range-slider__range-bar--disabled{background-color:var(--as--range-slider__range-bar--background-color--disabled)}as-range-slider-bar .as-range-slider__range-bar--draggable{cursor:-webkit-grab;cursor:grab}as-range-slider-bar .as-range-slider__range-bar--draggable:after{content:\" \";position:absolute;top:-6px;left:0;width:calc(100% - 20px);height:12px;-webkit-transform:translate3d(10px,0,0);transform:translate3d(10px,0,0)}as-range-slider-bar .as-range-slider__range-bar--moving{cursor:-webkit-grabbing;cursor:grabbing}"}}class l{render(){const t={left:`${this.percentage}%`},a={"as-range-slider__thumb":!0,"as-range-slider__thumb--disabled":this.disabled},s={"as-caption":!0,"as-font-medium":!0,"as-range-slider__value":!0,"as-range-slider__value--disabled":this.disabled};return e("div",{role:"slider",tabindex:this.disabled?"-1":"0","aria-valuetext":this._getDisplayValue(this.value),"aria-valuenow":this.value,"aria-valuemin":this.valueMin,"aria-valuemax":this.valueMax,class:a,style:t,"data-value":this.value},e("div",{class:"as-range-slider__thumb-handle"}),e("span",{class:s},this._getDisplayValue(this.value)))}onMouseDown(e){this.thumbChangeStart.emit(),this.railElement=document.querySelector(".as-range-slider__rail");const t=e.target;t.classList.add("as-range-slider__thumb-handle--moving"),this.thumbValue=t.parentElement.querySelector(".as-range-slider__value"),this.thumbValue.classList.add("as-range-slider__value--moving"),this.railBoundingClientRect=this.railElement.getBoundingClientRect(),a({move:e=>this._onMove(e),release:()=>this._onRelease(t)}),t.focus()}onKeyDown(e){if(this.disabled)return;let t=!1;switch(e.keyCode){case 40:case 37:this.thumbDecrease.emit(),t=!0;break;case 38:case 39:this.thumbIncrease.emit(),t=!0}t&&(e.preventDefault(),e.stopPropagation())}_onMove(e){this.setCursorTo("grabbing");const t=e.changedTouches,a=100*((t?t[0].pageX:e.pageX)-this.railBoundingClientRect.left)/this.railElement.offsetWidth;return a<0&&this.percentage>0?this.thumbMove.emit(0):a>100&&this.percentage<100?this.thumbMove.emit(100):void(a<0||a>100||this.thumbMove.emit(a))}_onRelease(e){e.classList.remove("as-range-slider__thumb-handle--moving"),this.thumbValue.classList.remove("as-range-slider__value--moving"),this.setCursorTo(""),this.thumbChangeEnd.emit()}_getDisplayValue(e){return this.formatValue&&this.formatValue(e)||e}setCursorTo(e){document.body.style.cursor=e}static get is(){return"as-range-slider-thumb"}static get properties(){return{disabled:{type:Boolean,attr:"disabled"},element:{elementRef:!0},formatValue:{type:"Any",attr:"format-value"},percentage:{type:Number,attr:"percentage"},value:{type:Number,attr:"value"},valueMax:{type:Number,attr:"value-max"},valueMin:{type:Number,attr:"value-min"}}}static get events(){return[{name:"thumbMove",method:"thumbMove",bubbles:!0,cancelable:!0,composed:!0},{name:"thumbChangeStart",method:"thumbChangeStart",bubbles:!0,cancelable:!0,composed:!0},{name:"thumbChangeEnd",method:"thumbChangeEnd",bubbles:!0,cancelable:!0,composed:!0},{name:"thumbIncrease",method:"thumbIncrease",bubbles:!0,cancelable:!0,composed:!0},{name:"thumbDecrease",method:"thumbDecrease",bubbles:!0,cancelable:!0,composed:!0}]}static get listeners(){return[{name:"mousedown",method:"onMouseDown",passive:!0},{name:"touchstart",method:"onMouseDown",passive:!0},{name:"keydown",method:"onKeyDown"}]}static get style(){return"as-range-slider-thumb .as-range-slider__thumb{--as--range-slider--disabled--value--color:var(--as--color--ui-03,#e2e6e3);--as--range-slider--thumb-handle--border-color:var(--as--color--primary,#1785fb);--as--range-slider--thumb-handle--background-color:var(--as--color--white,#fff);--as--range-slider--disabled--thumb-handle--border-color:var(--as--color--ui-03,#e2e6e3);--as--range-slider--disabled--thumb-handle--background-color:var(--as--color--ui-02,#f5f5f5);--as--range-slider--disabled--thumb-handle--focus-background-color:var(--as--color--ui-02,#f5f5f5);--as--range-slider--focus--thumb-handle--background-color:var(--as--color--primary,#1785fb);position:absolute;z-index:2;width:12px;height:12px;-webkit-transform:translate3d(-6px,0,0);transform:translate3d(-6px,0,0);-webkit-transition:opacity .2s ease,-webkit-transform .2s ease;transition:opacity .2s ease,-webkit-transform .2s ease;transition:transform .2s ease,opacity .2s ease;transition:transform .2s ease,opacity .2s ease,-webkit-transform .2s ease}as-range-slider-thumb .as-range-slider__value{position:absolute;bottom:-16px;left:50%;-webkit-transform:translate3d(-53%,0,0);transform:translate3d(-53%,0,0);-webkit-transition:-webkit-transform .2s ease;transition:-webkit-transform .2s ease;transition:transform .2s ease;transition:transform .2s ease,-webkit-transform .2s ease;pointer-events:none}as-range-slider-thumb .as-range-slider__value--disabled{color:var(--as--range-slider--disabled--value--color)}as-range-slider-thumb .as-range-slider__thumb-handle{width:12px;height:12px;-webkit-transition:-webkit-transform .2s ease;transition:-webkit-transform .2s ease;transition:transform .2s ease;transition:transform .2s ease,-webkit-transform .2s ease;border:1px solid var(--as--range-slider--thumb-handle--border-color);border-radius:50%;background-color:var(--as--range-slider--thumb-handle--background-color);cursor:-webkit-grab;cursor:grab}as-range-slider-thumb .as-range-slider__thumb-handle:before{content:\"\";position:absolute;top:-15px;left:-15px;width:30px;height:30px}as-range-slider-thumb .as-range-slider__thumb-handle.as-range-slider__thumb-handle--moving,as-range-slider-thumb .as-range-slider__thumb-handle:hover{-webkit-transform:scale(1.33);transform:scale(1.33)}as-range-slider-thumb .as-range-slider__thumb-handle--moving{cursor:-webkit-grabbing;cursor:grabbing}as-range-slider-thumb .as-range-slider__thumb--disabled .as-range-slider__thumb-handle{border:1px solid var(--as--range-slider--disabled--thumb-handle--border-color);background-color:var(--as--range-slider--disabled--thumb-handle--background-color)}as-range-slider-thumb .as-range-slider__thumb--disabled .as-range-slider__thumb-handle:focus{background:var(--as--range-slider--disabled--thumb-handle--focus-background-color)}as-range-slider-thumb .as-range-slider__thumb:focus{outline:none}as-range-slider-thumb .as-range-slider__thumb:focus .as-range-slider__thumb-handle{background:var(--as--range-slider--focus--thumb-handle--background-color)}as-range-slider-thumb .as-range-slider__thumb+.as-range-slider__thumb:hover{-webkit-transform:translate3d(-6px,0,0) scale(1.33);transform:translate3d(-6px,0,0) scale(1.33)}"}}export{t as AsRangeSlider,i as AsRangeSliderBar,l as AsRangeSliderThumb};